# 🍽️ نظام إدارة المطاعم والبطاقات الذكية

نظام شامل لإدارة المطاعم والضيوف باستخدام تقنية QR Code مع دعم اللغتين العربية والإنجليزية.

## 📋 نظرة عامة على المشروع

هذا المشروع عبارة عن نظام إدارة متكامل للمطاعم يتضمن:
- إدارة المستخدمين والصلاحيات
- إدارة المطاعم وأوقات الوجبات
- إدارة الضيوف والبطاقات الذكية
- نظام البوابات والتحكم في الوصول
- تتبع العمليات والسجلات
- واجهة متجاوبة مع جميع الأجهزة

## 🏗️ البنية التقنية

### التقنيات المستخدمة
- **Frontend**: Next.js 15.5.4 مع React 19.1.0
- **Backend**: Next.js API Routes
- **Database**: PostgreSQL مع Prisma ORM
- **Authentication**: JWT مع bcryptjs
- **UI Components**: Radix UI مع Tailwind CSS
- **Internationalization**: next-intl للدعم متعدد اللغات
- **QR Code**: react-qr-code
- **State Management**: Zustand
- **Form Handling**: React Hook Form مع Zod validation

### هيكل قاعدة البيانات

#### النماذج الرئيسية:
1. **User** - إدارة المستخدمين والأدوار
2. **Permission** - نظام الصلاحيات
3. **Restaurant** - إدارة المطاعم
4. **Guest** - إدارة الضيوف
5. **Card** - البطاقات الذكية (QR)
6. **Gate** - البوابات والتحكم في الوصول
7. **MealTime** - أوقات الوجبات
8. **AccessLog** - سجلات الوصول
9. **AuditLog** - سجلات المراجعة

## 🚀 خطة العمل الشاملة

### المرحلة الأولى: إعداد البيئة والأساسيات ✅
- [x] إعداد قاعدة البيانات PostgreSQL
- [x] تكوين Prisma Schema
- [x] إعداد نظام المصادقة JWT
- [x] تكوين next-intl للغات المتعددة
- [x] إعداد مكونات UI الأساسية

### المرحلة الثانية: تطوير واجهات المستخدم 🔄
#### 2.1 صفحة تسجيل الدخول
- [ ] تصميم واجهة تسجيل الدخول متجاوبة
- [ ] تطبيق التحقق من صحة البيانات
- [ ] إضافة Rate Limiting
- [ ] دعم اللغتين العربية والإنجليزية

#### 2.2 لوحة التحكم الرئيسية
- [ ] تصميم Dashboard متجاوب
- [ ] عرض الإحصائيات الرئيسية
- [ ] قائمة التنقل الجانبية
- [ ] شريط علوي مع تبديل اللغة

#### 2.3 إدارة المستخدمين
- [ ] صفحة قائمة المستخدمين مع البحث والتصفية
- [ ] نموذج إضافة/تعديل المستخدمين
- [ ] إدارة الصلاحيات والأدوار
- [ ] تتبع نشاط المستخدمين

#### 2.4 إدارة المطاعم
- [ ] صفحة قائمة المطاعم
- [ ] نموذج إضافة/تعديل المطاعم
- [ ] إدارة أوقات الوجبات
- [ ] ربط المطاعم بالبوابات

#### 2.5 إدارة الضيوف
- [ ] صفحة قائمة الضيوف مع البحث المتقدم
- [ ] نموذج تسجيل ضيف جديد
- [ ] تعديل بيانات الضيوف
- [ ] عرض تاريخ الضيف

#### 2.6 إدارة البطاقات الذكية
- [ ] إنشاء بطاقات QR للضيوف
- [ ] عرض وطباعة البطاقات
- [ ] إدارة صلاحية البطاقات
- [ ] تتبع استخدام البطاقات

#### 2.7 إدارة البوابات
- [ ] صفحة إدارة البوابات
- [ ] تكوين إعدادات البوابات
- [ ] مراقبة حالة البوابات
- [ ] سجلات التحكم في البوابات

### المرحلة الثالثة: تطوير API والوظائف المتقدمة 📋
#### 3.1 API Endpoints
- [ ] `/api/users` - إدارة المستخدمين
- [ ] `/api/restaurants` - إدارة المطاعم
- [ ] `/api/guests` - إدارة الضيوف
- [ ] `/api/cards` - إدارة البطاقات
- [ ] `/api/gates` - إدارة البوابات
- [ ] `/api/reports` - التقارير والإحصائيات

#### 3.2 نظام الصلاحيات
- [ ] تطبيق RBAC (Role-Based Access Control)
- [ ] Middleware للتحقق من الصلاحيات
- [ ] حماية API Routes
- [ ] تسجيل العمليات في AuditLog

#### 3.3 نظام التقارير
- [ ] تقارير الضيوف والزيارات
- [ ] تقارير استخدام البطاقات
- [ ] تقارير نشاط البوابات
- [ ] إحصائيات المطاعم

### المرحلة الرابعة: التحسينات والأمان 🔒
#### 4.1 الأمان
- [ ] تشفير البيانات الحساسة
- [ ] تطبيق CSRF Protection
- [ ] Rate Limiting للAPI
- [ ] تسجيل محاولات الاختراق

#### 4.2 الأداء
- [ ] تحسين استعلامات قاعدة البيانات
- [ ] تطبيق Caching
- [ ] تحسين حجم Bundle
- [ ] Lazy Loading للمكونات

#### 4.3 التجاوب والUX
- [ ] تحسين التجاوب مع الأجهزة المحمولة
- [ ] إضافة Loading States
- [ ] تحسين رسائل الخطأ
- [ ] إضافة Animations

### المرحلة الخامسة: الاختبار والنشر 🚀
#### 5.1 الاختبار
- [ ] Unit Tests للمكونات
- [ ] Integration Tests للAPI
- [ ] E2E Tests للمسارات الرئيسية
- [ ] اختبار الأداء

#### 5.2 النشر
- [ ] إعداد Docker
- [ ] تكوين CI/CD Pipeline
- [ ] إعداد Production Database
- [ ] مراقبة الأخطاء والأداء

## 📱 التجاوب مع الشاشات

### نقاط الكسر (Breakpoints)
- **Mobile**: 320px - 768px
- **Tablet**: 768px - 1024px
- **Desktop**: 1024px+

### استراتيجية التجاوب
1. **Mobile First Design**: البدء بتصميم الهاتف المحمول
2. **Flexible Grid System**: استخدام CSS Grid و Flexbox
3. **Responsive Typography**: خطوط متجاوبة
4. **Touch-Friendly**: أزرار وعناصر مناسبة للمس
5. **Progressive Enhancement**: تحسين تدريجي للشاشات الأكبر

## 🛠️ إعداد المشروع

### متطلبات النظام
- Node.js 18+ 
- PostgreSQL 12+
- npm أو yarn

### خطوات التثبيت

```bash
# 1. استنساخ المشروع
git clone <repository-url>
cd new-qrcode-folder

# 2. تثبيت التبعيات
npm install

# 3. إعداد قاعدة البيانات
# إنشاء ملف .env وإضافة DATABASE_URL
DATABASE_URL="postgresql://username:password@localhost:5432/database_name"

# 4. تشغيل migrations
npx prisma migrate dev

# 5. إنشاء Prisma Client
npx prisma generate

# 6. تشغيل المشروع
npm run dev
```

### متغيرات البيئة المطلوبة
```env
DATABASE_URL="postgresql://username:password@localhost:5432/database_name"
JWT_SECRET="your-jwt-secret-key"
JWT_REFRESH_SECRET="your-refresh-secret-key"
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-nextauth-secret"
```

## 📚 الوثائق التقنية

### هيكل المجلدات
```
src/
├── app/                    # Next.js App Router
│   ├── [locale]/          # صفحات متعددة اللغات
│   ├── api/               # API Routes
│   └── globals.css        # الأنماط العامة
├── components/            # المكونات القابلة لإعادة الاستخدام
│   └── ui/               # مكونات UI الأساسية
├── lib/                  # المكتبات والأدوات المساعدة
├── messages/             # ملفات الترجمة
└── middleware.ts         # Next.js Middleware
```

### أنماط التطوير
1. **Component-Based Architecture**: مكونات قابلة لإعادة الاستخدام
2. **API-First Design**: تصميم API قبل الواجهة
3. **Type Safety**: استخدام TypeScript بشكل صارم
4. **Error Handling**: معالجة شاملة للأخطاء
5. **Logging**: تسجيل شامل للعمليات

## 🔧 الصيانة والتطوير

### المهام الدورية
- [ ] تحديث التبعيات شهرياً
- [ ] مراجعة سجلات الأمان
- [ ] نسخ احتياطية لقاعدة البيانات
- [ ] مراقبة الأداء

### خطط التطوير المستقبلية
- [ ] تطبيق الهاتف المحمول
- [ ] تكامل مع أنظمة خارجية
- [ ] ذكاء اصطناعي للتحليلات
- [ ] نظام إشعارات متقدم

## 📞 الدعم والمساعدة

للحصول على المساعدة أو الإبلاغ عن مشاكل:
- إنشاء Issue في GitHub
- مراجعة الوثائق التقنية
- التواصل مع فريق التطوير

---

**تم إنشاء هذا المشروع باستخدام Next.js وأفضل الممارسات في تطوير الويب الحديث.**
